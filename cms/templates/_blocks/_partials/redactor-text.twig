{% set redactorText = text is defined ? text : block.text %}
<div
    v-waypoint="{ active: true, callback: onWaypoint, options: intersectionOptions }"
    class="text-wrapper">
    {{
        redactorText
            | typogrify
            | retconAttr( "figure", { style: '' } )
            | retconWrap( "figure img", ".img" )
            | retconWrap( "figure iframe[src*='youtube']", ".video" )
            | retconAttr( "figure div.image + figcaption", { class: 'img' } )
            | retconAttr( "figure div.video iframe", { style: '' } )
    }}
</div>
